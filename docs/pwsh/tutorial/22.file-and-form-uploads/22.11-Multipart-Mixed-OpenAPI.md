---
layout: default
parent: File and Form Uploads
title: OpenAPI: multipart/mixed
nav_order: 11
---

# OpenAPI: multipart/mixed

Document ordered multipart/mixed payloads with OpenAPI.

## Full source

File: [`pwsh/tutorial/examples/22-file-and-form-uploads/22.11-multipart-mixed-openapi.ps1`][22.11-multipart-mixed-openapi.ps1]

```powershell
{% include examples/pwsh/22.11-Multipart-Mixed-OpenAPI.ps1 %}
```

## Step-by-step

1. Logger: Register a console logger for visibility.
2. Server: Create the host and bind a listener.
3. OpenAPI: Add document info and contact metadata.
4. Rules: Define multipart rules and opt in to `multipart/mixed`.
5. Route: Bind `/mixed` with `KrBindForm` and `[OpenApiRequestBody]`.
6. Response: Emit content type summaries for the ordered parts.
7. Docs: Register the OpenAPI route and documentation UIs.
8. Start: Launch the server.

## Try it

```powershell
$boundary = 'mixed-boundary'
$body = @(
    "--$boundary",
    'Content-Type: text/plain',
    '',
    'first',
    "--$boundary",
    'Content-Type: application/json',
    '',
    '{"value":42}',
    "--$boundary--",
    ''
) -join "`r`n"
Invoke-RestMethod -Method Post -Uri 'http://127.0.0.1:5000/mixed' -ContentType "multipart/mixed; boundary=$boundary" -Body $body
```

```bash
boundary="mixed-boundary"
body="--$boundary\r\nContent-Type: text/plain\r\n\r\nfirst\r\n--$boundary\r\nContent-Type: application/json\r\n\r\n{\"value\":42}\r\n--$boundary--\r\n"
curl -H "Content-Type: multipart/mixed; boundary=$boundary" --data-binary "$body" http://127.0.0.1:5000/mixed
```

## Troubleshooting

- 415 / Unsupported Content-Type: Ensure the route opts into `multipart/mixed`.
- Empty parts: Verify your body uses a matching boundary and proper CRLF line endings.

## References

- [New-KrFormPartRule][New-KrFormPartRule]
- [Add-KrFormOption][Add-KrFormOption]
- [Add-KrOpenApiInfo][Add-KrOpenApiInfo]
- [Add-KrOpenApiContact][Add-KrOpenApiContact]
- [Add-KrOpenApiRoute][Add-KrOpenApiRoute]
- [Add-KrApiDocumentationRoute][Add-KrApiDocumentationRoute]
- [New-KrServer][New-KrServer]
- [Add-KrEndpoint][Add-KrEndpoint]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Write-KrJsonResponse][Write-KrJsonResponse]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [OpenAPI: urlencoded forms](./22.10-Url-Encoded-OpenAPI)
Next: [OpenAPI: nested multipart](./22.12-Nested-Multipart-OpenAPI)

[22.11-multipart-mixed-openapi.ps1]: /pwsh/tutorial/examples/22-file-and-form-uploads/22.11-multipart-mixed-openapi.ps1
[New-KrFormPartRule]: /pwsh/cmdlets/New-KrFormPartRule
[Add-KrFormOption]: /pwsh/cmdlets/Add-KrFormOption
[Add-KrOpenApiInfo]: /pwsh/cmdlets/Add-KrOpenApiInfo
[Add-KrOpenApiContact]: /pwsh/cmdlets/Add-KrOpenApiContact
[Add-KrOpenApiRoute]: /pwsh/cmdlets/Add-KrOpenApiRoute
[Add-KrApiDocumentationRoute]: /pwsh/cmdlets/Add-KrApiDocumentationRoute
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrEndpoint]: /pwsh/cmdlets/Add-KrEndpoint
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Write-KrJsonResponse]: /pwsh/cmdlets/Write-KrJsonResponse
