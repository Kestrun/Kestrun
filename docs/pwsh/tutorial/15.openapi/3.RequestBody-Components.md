---
title: RequestBody Components
parent: OpenApi
nav_order: 3
---

# RequestBody Components

Create reusable request body components that can be shared across multiple endpoints.

## Full source

File: [`pwsh/tutorial/examples/15.3-OpenAPI-RequestBody-Component.ps1`][15.3-OpenAPI-RequestBody-Component.ps1]

```powershell
{% include examples/pwsh/15.3-OpenAPI-RequestBody-Component.ps1 %}
```

## Step-by-step

1. Logging: Register console logger as default.
2. Server: Create server named 'OpenAPI RequestBody Component'.
3. OpenAPI info: Add title and description.
4. Define `Product` schema for product data.
5. Define `UpdateProduct` schema with optional fields.
6. Create `CreateProductRequest` component wrapping `Product` schema with JSON and form data support.
7. Create `UpdateProductRequest` component wrapping `UpdateProduct` schema with JSON support.
8. POST endpoint: Accept CreateProductRequest and return product with timestamp.
9. PUT endpoint: Accept UpdateProductRequest and return updated product.
10. Build and test OpenAPI document.

## Try it

```powershell
# Create product using CreateProductRequest component
curl -X POST http://127.0.0.1:5000/products `
  -H "Content-Type: application/json" `
  -d '{
    "productName": "Gaming Laptop",
    "price": 1599.99,
    "description": "High-performance laptop for gaming",
    "stock": 25
  }'

# Update product using UpdateProductRequest component
curl -X PUT http://127.0.0.1:5000/products/1 `
  -H "Content-Type: application/json" `
  -d '{
    "productName": "Gaming Laptop Pro",
    "price": 1899.99,
    "stock": 15
  }'

# View request body components in OpenAPI spec
curl http://127.0.0.1:5000/openapi/v1/openapi.json | jq '.components.requestBodies'
```

PowerShell create example:

```powershell
$createPayload = @{
    productName = 'Gaming Laptop'
    price       = 1599.99
    description = 'High-performance laptop for gaming'
    stock       = 25
} | ConvertTo-Json

Invoke-WebRequest -Uri http://127.0.0.1:5000/products `
    -Method Post `
    -Headers @{ 'Content-Type' = 'application/json' } `
    -Body $createPayload
```

## RequestBody Component Attributes

```powershell
[OpenApiRequestBodyComponent(
    Description = 'Product creation payload',
    IsRequired = $true,
    ContentType = ('application/json', 'application/x-www-form-urlencoded')
)]
class CreateProductRequest:Product {}
```

- **Description**: Human-readable description of the request body.
- **IsRequired**: Set to `$true` to mark the request body as required.
- **ContentType**: Single or array of supported MIME types (e.g., `'application/json'`, `'application/xml'`).
- **Inheritance**: The component inherits from a schema class using the colon syntax.

## Key Concepts

- **Reusability**: Define once, reference in multiple endpoints.
- **Multiple Content Types**: Support JSON, form data, XML, or other formats.
- **Schema Inheritance**: Components inherit from base schema classes (e.g., `CreateProductRequest:Product`).
- **Separation**: Distinct request components for different operations (Create vs. Update).

## References

- [OpenApiRequestBodyComponent](/pwsh/cmdlets/OpenApiRequestBodyComponent)
- [Add-KrMapRoute](/pwsh/cmdlets/Add-KrMapRoute)
- [Build-KrOpenApiDocument](/pwsh/cmdlets/Build-KrOpenApiDocument)

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Component Schemas](./2.Component-Schemas.md)
Next: [Parameter Components](./4.Parameter-Components.md)

[15.3-OpenAPI-RequestBody-Component.ps1]: {{ site.baseurl }}/docs/_includes/examples/pwsh/15.3-OpenAPI-RequestBody-Component.ps1
