---
title: Full Server Demo
parent: Lifecycle
nav_order: 2
layout: default
---

# Full Server Demo

Run an integrated demo server with multiple endpoints, basic routes, and clean start/stop.

## Full source

File: [`pwsh/tutorial/examples/14.2-Full-Demo.ps1`][14.2-Full-Demo.ps1]

```powershell
{% include examples/pwsh/14.2-Full-Demo.ps1 %}
```

## Step-by-step

1. Logging: Register a console logger.
2. Certificates: Create (or reuse) a dev certificate for HTTPS.
3. Server: Create a named server and add HTTP/HTTPS endpoints.
4. Routes: Map a small set of demo routes (for example `/health` and `/version`).
5. Lifecycle: Start non-blocking, wait for input, then stop and remove the server.

## Try it

```powershell
# Run the demo (defaults to http://127.0.0.1:5000)
pwsh .\docs\_includes\examples\pwsh\14.2-Full-Demo.ps1

# In another terminal
curl -i http://127.0.0.1:5000/health
curl -i http://127.0.0.1:5000/version
```

## References

- [New-KrServer][New-KrServer]
- [Add-KrEndpoint][Add-KrEndpoint]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Start-KrServer][Start-KrServer]
- [Stop-KrServer][Stop-KrServer]
- [Remove-KrServer][Remove-KrServer]
- [New-KrSelfSignedCertificate][New-KrSelfSignedCertificate]
- [Add-KrMapRoute][Add-KrMapRoute]

## Troubleshooting

| Symptom | Cause | Fix |
|---|---|---|
| HTTPS endpoint fails to start | Missing/incorrect PFX password | Re-run the script and enter the correct password when prompted |
| Port already in use | Another process is listening on `$Port` | Stop the other process or run the script with `-Port` set to a free port |
| Script waits for input | Demo uses a “press Enter to stop” pattern | Press Enter to stop, or remove the console read line if running non-interactively |

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Start/Stop Patterns](./1.Start-Stop)
Next: [Middleware](../15.middleware/index)

[14.2-Full-Demo.ps1]: /pwsh/tutorial/examples/14.2-Full-Demo.ps1
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrEndpoint]: /pwsh/cmdlets/Add-KrEndpoint
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Stop-KrServer]: /pwsh/cmdlets/Stop-KrServer
[Remove-KrServer]: /pwsh/cmdlets/Remove-KrServer
[New-KrSelfSignedCertificate]: /pwsh/cmdlets/New-KrSelfSignedCertificate
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
