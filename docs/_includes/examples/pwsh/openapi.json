{
  "openapi": "3.1.1",
  "info": {
    "title": "Kestrun API",
    "version": "1.0.0"
  },
  "paths": { },
  "components": {
    "schemas": {
      "Address": {
        "type": "object",
        "properties": {
          "Street": {
            "title": "Street Address",
            "maxLength": 100,
            "pattern": "^[\\w\\s\\d]+$",
            "type": "string",
            "description": "The street address",
            "default": "123 Main St",
            "example": "123 Main St"
          },
          "City": {
            "title": "City Name",
            "pattern": "^[\\w\\s\\d]+$",
            "type": "string",
            "description": "The city name",
            "default": "Anytown",
            "example": "Anytown"
          },
          "PostalCode": {
            "title": "Postal Code",
            "pattern": "^\\d{5}(-\\d{4})?$",
            "type": "string",
            "description": "The postal code",
            "default": "12345",
            "example": "12345"
          },
          "ApartmentNumber": {
            "title": "Apartment Number",
            "minimum": 1,
            "type": "integer",
            "description": "The apartment number",
            "format": "int32",
            "default": 101,
            "example": 101
          }
        }
      },
      "UserInfoResponse": {
        "type": "object",
        "properties": {
          "Id": {
            "minimum": 0,
            "type": "integer",
            "description": "User identifier",
            "format": "int32"
          },
          "Name": {
            "maxLength": 50,
            "type": "string",
            "description": "Display name"
          },
          "Age": {
            "maximum": 120,
            "minimum": 0,
            "type": "integer",
            "description": "Age in years",
            "format": "int32"
          },
          "Address": {
            "description": "Mailing address",
            "$ref": "#/components/schemas/Address"
          }
        }
      }
    },
    "responses": {
      "AddressResponse-OK": {
        "description": "Successful retrieval of address",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Address"
            }
          }
        }
      },
      "AddressResponse-NotFound": {
        "description": "Address not found"
      }
    },
    "parameters": {
      "Name": {
        "name": "name",
        "in": "query",
        "schema": {
          "type": "string",
          "description": "Filter by name (contains)"
        }
      },
      "MinAge": {
        "name": "minAge",
        "in": "cookie",
        "schema": {
          "minimum": 0,
          "type": "integer",
          "description": "Minimum age",
          "format": "int32"
        }
      }
    },
    "examples": {
      "AddressExamples-Basic": {
        "description": "Sample address",
        "value": {
          "City": "Anytown",
          "ApartmentNumber": 101,
          "Street": "123 Main St",
          "PostalCode": "12345"
        }
      },
      "AddressExamples-NoApt": {
        "description": "Address without apartment",
        "value": {
          "City": "Metropolis",
          "Street": "456 2nd Ave",
          "PostalCode": "10001"
        }
      }
    },
    "requestBodies": {
      "AddressRequestBodies-Create": {
        "description": "Create address payload",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Address"
            },
            "example": {
              "City": "Anytown",
              "ApartmentNumber": 101,
              "Street": "123 Main St",
              "PostalCode": "12345"
            }
          }
        },
        "required": true
      },
      "AddressRequestBodies-Patch": {
        "description": "Partial update payload",
        "content": {
          "application/json": {
            "example": {
              "City": "Gotham"
            }
          }
        }
      }
    },
    "headers": {
      "CommonHeaders-TenantId": {
        "description": "Tenant identifier",
        "required": true,
        "style": "simple",
        "schema": {
          "type": "string"
        }
      },
      "CommonHeaders-CorrelationId": {
        "description": "Correlation id for tracing",
        "style": "simple",
        "schema": {
          "type": "string"
        }
      }
    }
  }
}
