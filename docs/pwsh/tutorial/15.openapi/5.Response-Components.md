---
title: Response Components
parent: OpenApi
nav_order: 5
---

# Response Components

Create reusable response components for consistent response structures across multiple endpoints.

## Full source

File: [`pwsh/tutorial/examples/15.5-OpenAPI-Response-Component.ps1`][15.5-OpenAPI-Response-Component.ps1]

```powershell
{% include examples/pwsh/15.5-OpenAPI-Response-Component.ps1 %}
```

## Step-by-step

1. Logging: Register console logger as default.
2. Server: Create server named 'OpenAPI Response Component'.
3. OpenAPI info: Add title and description.
4. Define `ErrorResponse` schema with statusCode, message, code, and details.
5. Define `Article` schema with article content fields.
6. Define `SuccessResponse` schema with operation confirmation fields.
7. Create `ResponseSuccess` component wrapping SuccessResponse.
8. Create `ResponseError` component wrapping ErrorResponse.
9. Create `ResponseArticle` component wrapping Article.
10. GET, POST, DELETE endpoints using response components for consistent responses.
11. Build and test OpenAPI document.

## Try it

```powershell
# Get article (success response)
curl -i http://127.0.0.1:5000/articles/1

# Get article with invalid ID (error response)
curl -i http://127.0.0.1:5000/articles/-1

# Create article (success response)
curl -X POST http://127.0.0.1:5000/articles `
  -H "Content-Type: application/json" `
  -d '{
    "title": "My Article",
    "content": "Article content here"
  }'

# Create with missing fields (error response)
curl -X POST http://127.0.0.1:5000/articles `
  -H "Content-Type: application/json" `
  -d '{"title": "Missing content"}'

# Delete article (success response)
curl -X DELETE http://127.0.0.1:5000/articles/1
```

PowerShell create example:

```powershell
$body = @{
    title   = 'My Article'
    content = 'Article content here'
} | ConvertTo-Json

Invoke-WebRequest -Uri http://127.0.0.1:5000/articles `
    -Method Post `
    -Headers @{ 'Content-Type' = 'application/json' } `
    -Body $body | Select-Object StatusCode, Content
```

## Response Component Attributes

```powershell
[OpenApiResponseComponent(Description = 'Article response')]
class ResponseArticle {
    [OpenApiResponse(
        Description = 'Article data',
        ContentType = 'application/json'
    )]
    [Article]$Default
}
```

- **OpenApiResponseComponent()**: Marks a class as a reusable response component.
- **OpenApiResponse()**: Decorates the response property with description and content type.
- **ContentType**: MIME type of the response (e.g., `'application/json'`).
- **Default property**: The `$Default` property holds the schema being returned.

## Common Response Patterns

```powershell
# Success confirmation (ID, message, timestamp)
[OpenApiSchemaComponent(Required = ('id', 'message', 'timestamp'))]
class SuccessResponse {
    [string]$id
    [string]$message
    [string]$timestamp
}

# Detailed error (code, message, field, details)
[OpenApiSchemaComponent(Required = ('code', 'message'))]
class ErrorDetail {
    [string]$code
    [string]$message
    [string]$field
    [string]$details
}

# Data response (with metadata)
[OpenApiSchemaComponent(Required = ('id', 'data'))]
class DataResponse {
    [string]$id
    [object]$data
    [string]$timestamp
}
```

## Key Concepts

- **Consistency**: Reusable response schemas ensure consistent API behavior.
- **Error Standardization**: Use a common error schema across all error responses.
- **Success Confirmation**: Include operation ID, message, and timestamp for async operations.
- **Content Negotiation**: Specify different content types (JSON, XML, etc.).
- **Documentation**: Response components appear in OpenAPI spec under `components.responses`.

## References

- [OpenApiResponseComponent](/pwsh/cmdlets/OpenApiResponseComponent)
- [OpenApiResponse](/pwsh/cmdlets/OpenApiResponse)
- [Write-KrJsonResponse](/pwsh/cmdlets/Write-KrJsonResponse)
- [Add-KrMapRoute](/pwsh/cmdlets/Add-KrMapRoute)

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Parameter Components](./4.Parameter-Components.md)
Next: [Complete Components](./6.Complete-Components.md)

[15.5-OpenAPI-Response-Component.ps1]: {{ site.baseurl }}/docs/_includes/examples/pwsh/15.5-OpenAPI-Response-Component.ps1
